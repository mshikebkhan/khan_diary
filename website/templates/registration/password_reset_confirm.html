{% extends 'khandiary/base.html' %}
{% load static %}
{% block content %}


{% if validlink %}

<!-- Page Header -->
<center>
  <p class="title is-size-4 is-size-5-mobile">Set a new password</p>
  <hr class="page-header-hr">
</center>

<!-- Change Password Form -->
<div class="columns is-centered has-text-centered">
  <div class="column is-wider is-half-tablet">
    <div class="card">
      <div class="card-content">
        <form role="form" method="post" autocomplete="off">
          {% csrf_token %}

          {{ form.id }}

          <!-- New Password -->
          <div class="field">
            <div class="control has-icons-left has-icons-right">
              <input type="password" name="new_password1" class="input is-rounded is-success" placeholder="New Password" autocomplete="new-password1" maxlength="30" required="" id="id_new_password1" aria-autocomplete="list">
              <span class="icon is-small is-left"><i class="fas fa-key"></i></span>
            </div>
          </div>

          <!-- Confirm New Password -->
          <div class="field">
            <div class="control has-icons-left has-icons-right">
              <input type="password" name="new_password2" class="input is-rounded is-success" placeholder="Confirm new password" autocomplete="new-password2" maxlength="30" required="" id="id_new_password2" aria-autocomplete="list">
              <span class="icon is-small is-left"><i class="fas fa-key"></i></span>
            </div>
          </div>

          <!-- New Password errors -->
          {% if form.new_password2.errors %}
            <p class="help is-danger">
              <ul>
                {% for error in form.new_password2.errors %}
                  <li>
                    <strong style="color: red;">{{ error|escape }}</strong>
                  </li>
                {% endfor %}
              </ul>
            </p>
          {% endif %}

          <!-- Submit Button -->
          <div class="field">
            <div class="control">
              <button class="button is-success is-rounded" name="action" type="submit">
                <b>Reset Password</b>
              </button>
            </div>
          </div>

        </form>
      </div>
    </div>

  </div>
</div>


{% else %}

<center>
  <br><br><br><br><br>
  <p class="title is-2 danger">Invalid link</p>
  <p class="subtitle is-5">
    The password reset link was invalid, it has alredy been used. Please request a new one.
  </p> 
  <br><br><br><br><br>
</center>

{% endif %}


{% endblock content %}
